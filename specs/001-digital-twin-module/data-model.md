# Data Model: Module 2 â€” The Digital Twin (Gazebo & Unity)

**Branch**: `001-digital-twin-module` | **Date**: 2025-12-11
**Context**: Key entities and their relationships within the 'Digital Twin Module' to facilitate simulation and integration.

## Entities

### Humanoid Robot Model

-   **Description**: Represents the virtual humanoid robot used in simulations and visualizations. It defines the robot's physical and visual properties.
-   **Attributes**:
    -   `URDF Description (string)`: XML-based format defining the robot's kinematic and dynamic properties, visual appearance, and collision geometry.
    -   `Joint Configurations (array of Joint)`: Defines the names, types, limits, and initial positions of the robot's joints.
    -   `Visual Meshes (array of Mesh)`: 3D models (e.g., STL, DAE) for rendering the robot's appearance.
    -   `Collision Meshes (array of Mesh)`: 3D models for defining the robot's physical interaction with the environment.
-   **Relationships**: Used within `Gazebo World` for physics simulation and imported into `Unity Scene` for rendering. Controlled via `ROS 2 Topics/Services/Actions`.

### Gazebo World

-   **Description**: The primary simulated environment where physics, dynamics, and sensors interact.
-   **Attributes**:
    -   `World Description (XML)`: Defines the environment's properties, static elements (e.g., ground plane, walls), lighting, and initial placement of models.
    -   `Static Objects (array of Model)`: Non-moving elements within the environment.
    -   `Dynamic Objects (array of Model)`: Movable elements, including `Humanoid Robot Model`.
    -   `Physics Engine Configuration (parameters)`: Settings for gravity, friction, collision detection algorithms.
-   **Relationships**: Hosts `Humanoid Robot Model` and other dynamic/static objects. Generates `Sensor Data`. Interacts with `ROS 2 Topics/Services/Actions` for control and feedback.

### Unity Scene

-   **Description**: The high-fidelity visualization and human-robot interaction environment.
-   **Attributes**:
    -   `Scene File (.unity)`: Contains all game objects, lighting, cameras, and scripts defining the visual environment.
    -   `Imported Robot Models (array of GameObject)`: Visual representations of robots, often imported from URDF or other 3D formats.
    -   `Environment Assets (array of GameObject)`: High-fidelity 3D models, textures, and materials for realistic rendering.
    -   `Lighting Configuration (parameters)`: Settings for realistic illumination.
    -   `HRI Elements (array of Script/UI Element)`: Interactive components for human interaction.
-   **Relationships**: Visualizes `Humanoid Robot Model`. Can receive `Sensor Data` or robot state via `ROS 2 Topics/Services/Actions` for display.

### Sensor Data

-   **Description**: Information generated by simulated sensors within the `Gazebo World`.
-   **Attributes**:
    -   `Type (enum)`: LiDAR, IMU, Depth Camera, Camera (RGB), Joint State, etc.
    -   `Timestamp (datetime)`: Time of data capture.
    -   `Frame ID (string)`: Coordinate frame of the sensor.
    -   `Payload (variant)`:
        -   `LiDAR`: PointCloud2 message (ROS 2), array of range values.
        -   `IMU`: Imu message (ROS 2), orientation, angular velocity, linear acceleration.
        -   `Depth Camera`: Image message (ROS 2), depth map.
        -   `Camera (RGB)`: Image message (ROS 2), color image.
        -   `Joint State`: JointState message (ROS 2), position, velocity, effort for joints.
-   **Relationships**: Originates from `Gazebo World`. Published via `ROS 2 Topics/Services/Actions`. Consumed by ROS 2 nodes for perception or by `Unity Scene` for visualization.

### ROS 2 Topics/Services/Actions

-   **Description**: The communication layer facilitating data exchange and command execution between various components (Gazebo, Unity, control nodes).
-   **Attributes**:
    -   `Type (enum)`: Topic (one-to-many), Service (request-response), Action (long-running goal-feedback-result).
    -   `Name (string)`: Unique identifier for the communication interface (e.g., `/joint_states`, `/scan`).
    -   `Message Type (string)`: Standardized data structure (e.g., `sensor_msgs/msg/PointCloud2`, `std_srvs/srv/SetBool`).
    -   `Publisher/Server/Client (component)`: The ROS 2 entity that provides or consumes the interface.
-   **Relationships**: Connects `Gazebo World`, `Humanoid Robot Model` controllers, and `Unity Scene` visualization components by transferring `Sensor Data` and control commands.