# Data Model: RAG Vector Record

This document defines the data structure for the vector records that will be stored in the Qdrant vector database. Each record represents a single chunk of text from the source website.

## Entity: VectorRecord

A `VectorRecord` is the fundamental unit of data for the retrieval system. It combines the semantic embedding with rich metadata to ensure traceability and enable advanced filtering.

### Schema

| Field Name        | Data Type              | Description                                                                                                 | Required | Indexed |
|-------------------|------------------------|-------------------------------------------------------------------------------------------------------------|----------|---------|
| `id`              | UUID / ULID            | A unique identifier for the chunk. A deterministic hash of the content can be used to ensure idempotency.     | Yes      | Yes     |
| `vector`          | Array[float] (Vector)  | The dense vector embedding generated by the Cohere model.                                                   | Yes      | Yes     |
| `payload`         | Object (JSON)          | A JSON object containing all associated metadata for the vector.                                            | Yes      | -       |

### Payload Structure

The `payload` object contains the rich metadata associated with each vector.

| Payload Field     | Data Type      | Description                                                                                             | Example                                                  |
|-------------------|----------------|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
| `source_url`      | String         | The full URL of the page from which the text was extracted.                                             | `https://[...]/module1-ros2-humanoid-control/chapter1`   |
| `page_title`      | String         | The title of the source HTML page.                                                                      | `Chapter 1: Introduction to ROS 2`                       |
| `section`         | String         | The title of the immediate parent section or heading (e.g., from an `<h2>` or `<h3>` tag).               | `Understanding ROS 2 Nodes`                              |
| `chunk_index`     | Integer        | The 0-based sequential index of this chunk within the source page, used for ordering and reconstruction. | `3`                                                      |
- **raw_text**
- Type: String
- Description: The original, unmodified text content of the chunk.
- Example: "A ROS 2 node is a fundamental component in the ROS 2 ecosystem. It is an executable that can communicate with other nodes..."
